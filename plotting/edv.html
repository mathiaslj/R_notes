<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.6.42">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Effective Data Visualisation – Various notes about R</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<script src="../site_libs/quarto-html/quarto.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting-2f5df379a58b258e96c21c0638c20c03.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap-3b319470b4edcef0648341312c309106.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


</head>

<body class="nav-sidebar docked nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../index.html">
    <span class="navbar-title">Various notes about R</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-data-wrangling" role="link" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Data wrangling</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-data-wrangling">    
        <li class="dropdown-header">Base R</li>
        <li>
    <a class="dropdown-item" href="../data-wrangling/baser.html">
 <span class="dropdown-text">Base R</span></a>
  </li>  
        <li><hr class="dropdown-divider"></li>
        <li class="dropdown-header">The tidyverse</li>
        <li>
    <a class="dropdown-item" href="../data-wrangling/tidyverse.html">
 <span class="dropdown-text">The <code>tidyverse</code></span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-plotting" role="link" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Plotting</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-plotting">    
        <li class="dropdown-header">Principles of Effective Data Visualisation</li>
        <li>
    <a class="dropdown-item" href="../plotting/edv.html">
 <span class="dropdown-text">Effective Data Visualisation</span></a>
  </li>  
        <li><hr class="dropdown-divider"></li>
        <li class="dropdown-header">Creating plots</li>
        <li>
    <a class="dropdown-item" href="../plotting/colors-in-R.html">
 <span class="dropdown-text">Colors in R</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../plotting/grid-and-gggrid.html">
 <span class="dropdown-text">Combining <code>grid</code> and <code>ggplot2</code></span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../plotting/ggplot2.html">
 <span class="dropdown-text"><code>ggplot2</code></span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-package-development" role="link" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Package development</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-package-development">    
        <li class="dropdown-header">Creating a package</li>
        <li>
    <a class="dropdown-item" href="../pkg-dev/get-started.html">
 <span class="dropdown-text">Get started</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../pkg-dev/gh-actions.html">
 <span class="dropdown-text">GitHub actions</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../pkg-dev/cran.html">
 <span class="dropdown-text">Submitting to CRAN</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-programming-in-r" role="link" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Programming in R</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-programming-in-r">    
        <li class="dropdown-header">Functional programming</li>
        <li>
    <a class="dropdown-item" href="../prog/func_prog.html">
 <span class="dropdown-text">Functional programming</span></a>
  </li>  
        <li><hr class="dropdown-divider"></li>
        <li class="dropdown-header">Object-oriented programming</li>
        <li>
    <a class="dropdown-item" href="../prog/obj_prog.html">
 <span class="dropdown-text">Object-oriented programming</span></a>
  </li>  
    </ul>
  </li>
</ul>
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/mathiaslj/R_notes"> <i class="bi bi-github" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <a class="flex-grow-1 no-decor" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
          <h1 class="quarto-secondary-nav-title">Effective Data Visualisation</h1>
        </a>     
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation docked overflow-auto">
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true">
 <span class="menu-text">Principles of Effective Data Visualisation</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../plotting/edv.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text">Effective Data Visualisation</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="false">
 <span class="menu-text">Creating plots</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../plotting/colors-in-R.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Colors in R</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../plotting/grid-and-gggrid.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Combining <code>grid</code> and <code>ggplot2</code></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../plotting/ggplot2.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><code>ggplot2</code></span></a>
  </div>
</li>
      </ul>
  </li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#concepts-from-sections-1.1-and-1.2-of-data-visualization-a-practical-introduction-by-kieran-healey." id="toc-concepts-from-sections-1.1-and-1.2-of-data-visualization-a-practical-introduction-by-kieran-healey." class="nav-link active" data-scroll-target="#concepts-from-sections-1.1-and-1.2-of-data-visualization-a-practical-introduction-by-kieran-healey.">Concepts from sections 1.1 and 1.2 of <em>“Data Visualization: A practical introduction”</em> by Kieran Healey.</a></li>
  <li><a href="#concepts-from-fundamentals-of-data-visualization-by-claus-o.-wilke" id="toc-concepts-from-fundamentals-of-data-visualization-by-claus-o.-wilke" class="nav-link" data-scroll-target="#concepts-from-fundamentals-of-data-visualization-by-claus-o.-wilke">Concepts from Fundamentals of Data Visualization by Claus O. Wilke</a>
  <ul class="collapse">
  <li><a href="#the-principle-of-proportional-ink" id="toc-the-principle-of-proportional-ink" class="nav-link" data-scroll-target="#the-principle-of-proportional-ink">The principle of proportional ink</a></li>
  <li><a href="#direct-area-visualisations" id="toc-direct-area-visualisations" class="nav-link" data-scroll-target="#direct-area-visualisations">Direct Area Visualisations</a></li>
  <li><a href="#overplotting" id="toc-overplotting" class="nav-link" data-scroll-target="#overplotting">Overplotting</a></li>
  <li><a href="#sec-colorpitfalls" id="toc-sec-colorpitfalls" class="nav-link" data-scroll-target="#sec-colorpitfalls">Color pitfalls</a>
  <ul class="collapse">
  <li><a href="#color-vision-deficiency" id="toc-color-vision-deficiency" class="nav-link" data-scroll-target="#color-vision-deficiency">Color vision deficiency</a></li>
  <li><a href="#color-contrasts" id="toc-color-contrasts" class="nav-link" data-scroll-target="#color-contrasts">Color contrasts</a></li>
  <li><a href="#color-scales" id="toc-color-scales" class="nav-link" data-scroll-target="#color-scales">Color “scales”</a></li>
  <li><a href="#its-not-only-about-color" id="toc-its-not-only-about-color" class="nav-link" data-scroll-target="#its-not-only-about-color">It’s not only about color</a></li>
  </ul></li>
  <li><a href="#designing-figures-without-legends" id="toc-designing-figures-without-legends" class="nav-link" data-scroll-target="#designing-figures-without-legends">Designing figures without legends</a></li>
  <li><a href="#multi-panel-figures" id="toc-multi-panel-figures" class="nav-link" data-scroll-target="#multi-panel-figures">Multi-panel figures</a></li>
  <li><a href="#titles-captions-and-tables" id="toc-titles-captions-and-tables" class="nav-link" data-scroll-target="#titles-captions-and-tables">Titles, captions and tables</a></li>
  <li><a href="#gestault-rules" id="toc-gestault-rules" class="nav-link" data-scroll-target="#gestault-rules">Gestault rules</a></li>
  <li><a href="#channels" id="toc-channels" class="nav-link" data-scroll-target="#channels">Channels</a></li>
  </ul></li>
  <li><a href="#references" id="toc-references" class="nav-link" data-scroll-target="#references">References</a>
  <ul class="collapse">
  <li><a href="#lecture-notes-and-slides-from-stats-787-data-visualisation-at-uoa" id="toc-lecture-notes-and-slides-from-stats-787-data-visualisation-at-uoa" class="nav-link" data-scroll-target="#lecture-notes-and-slides-from-stats-787-data-visualisation-at-uoa">Lecture notes and slides from STATS 787: Data Visualisation at UoA</a></li>
  <li><a href="#references-from-inside-lecture-notes" id="toc-references-from-inside-lecture-notes" class="nav-link" data-scroll-target="#references-from-inside-lecture-notes">References from inside lecture notes</a></li>
  </ul></li>
  </ul>
<div class="toc-actions"><ul><li><a href="https://github.com/mathiaslj/R_notes/blob/main/plotting/edv.qmd" class="toc-action"><i class="bi bi-github"></i>View source</a></li></ul></div></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title d-none d-lg-block">Effective Data Visualisation</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<section id="concepts-from-sections-1.1-and-1.2-of-data-visualization-a-practical-introduction-by-kieran-healey." class="level1">
<h1>Concepts from <a href="https://socviz.co/lookatdata.html#why-look-at-data">sections 1.1 and 1.2</a> of <em>“Data Visualization: A practical introduction”</em> by Kieran Healey.</h1>
<ul>
<li><strong>Aesthetic:</strong> Ugly or inconsistent design choices</li>
<li><strong>Substantive:</strong> It’s not about making stuff look pretty but making sure to present data in the most informative way.
<ul>
<li>In many cases, this is not an issue directly with the plot but with the data. Always related to our question of interest.</li>
</ul></li>
<li><strong>Perceptual:</strong> In these cases, even with good aesthetic qualities and good data, the graph will be confusing or misleading because of how people perceive and process what they are looking at.
<ul>
<li>Fx. a continuous color scale for many categories can make it hard to distinguish colors from each other and can make fx. make a color appear lighter than it actually is if surrounded by darker colors.</li>
</ul></li>
<li><strong>Data-to-ink ratio (concept by Tufte):</strong> Tufte proposes to always maximise the data-to-ink ratio. Only add ANYTHING if it is really, really needed
<ul>
<li>Healey notes that <em>…, it may be the case that graphics that really do maximize the data-to-ink ratio are harder to interpret than those that are a little more relaxed about it</em>.</li>
</ul></li>
</ul>
</section>
<section id="concepts-from-fundamentals-of-data-visualization-by-claus-o.-wilke" class="level1">
<h1>Concepts from <a href="https://clauswilke.com/dataviz/">Fundamentals of Data Visualization</a> by Claus O. Wilke</h1>
<section id="the-principle-of-proportional-ink" class="level2">
<h2 class="anchored" data-anchor-id="the-principle-of-proportional-ink"><a href="https://clauswilke.com/dataviz/proportional-ink.html">The principle of proportional ink</a></h2>
<p>This concept has been termed by Bergstrom and West as the principle of proportional ink (Bergstrom and West <a href="https://callingbullshit.org/tools/tools_proportional_ink.html">2016</a>):</p>
<blockquote class="blockquote">
<p><strong>The principle of proportional ink:</strong> The sizes of shaded areas in a visualization need to be proportional to the data values they represent.</p>
</blockquote>
<ul>
<li>Most plots should always include 0 in the y-axis.
<ul>
<li>Be careful with heights/widths of bars.</li>
</ul></li>
<li>If values in a plot are much different from 0, making it hard to see differences, consider changing the response to a difference of some sort.</li>
<li>On logarithmic axes, bars are a ratio. Make sure to represent correctly.
<ul>
<li>Consider using points instead of bars.</li>
</ul></li>
</ul>
</section>
<section id="direct-area-visualisations" class="level2">
<h2 class="anchored" data-anchor-id="direct-area-visualisations">Direct Area Visualisations</h2>
<blockquote class="blockquote">
<p><em>“…, we perceive the area in a pie chart differently from the same area in a bar plot. The fundamental reason is that human perception primarily judges distances and not areas. Thus, if a data value is encoded entirely as a distance, as is the case with the length of a bar, we perceive it more accurately than when the data value is encoded through a combination of two or more distances that jointly create an area.”</em></p>
</blockquote>
<p>Functions to change the scale of point sizes (when using <code>aes(size = xx)</code> in a <code>geom_point</code> fx.): - <code>ggplot2::scale_radius</code> can be used to scale based on radius rather than area since. - <code>ggplot2::scale_size_area</code> can be used to make sure ratio of sizes is equal to ratio of data values.</p>
<p><strong>Note!</strong> Above function are generally not recommended, as they break with the principle of proportional ink. However, still might be cases where it makes sense to do.</p>
</section>
<section id="overplotting" class="level2">
<h2 class="anchored" data-anchor-id="overplotting"><a href="https://clauswilke.com/dataviz/overlapping-points.html">Overplotting</a></h2>
<p><strong>Issue:</strong> points that overlap.</p>
<p><strong>Possible fixes:</strong> - Transparent points - Jitter - High density of points: <em>Use 2D histogram</em> - See <code>ggplot2::geom_bin2d</code> and <code>ggplot2::geom_hex</code> (hexagons are more “correct”) - See also <code>smoothScatter</code> in the base <code>graphics</code> package, whic makes a 2D kernel density estimate but also shows points “on the edge”. - Contour lines - See <code>ggplot2::geom_density2d</code> or <code>ggplot2::geom_density2d_filled</code> - Be wary of <code>ggplot2::geom_density2d</code> not showing the entire range of data</p>
</section>
<section id="sec-colorpitfalls" class="level2">
<h2 class="anchored" data-anchor-id="sec-colorpitfalls"><a href="https://clauswilke.com/dataviz/color-pitfalls.html">Color pitfalls</a></h2>
<ul>
<li>Encoding too much or irrelevant information
<ul>
<li>Too much:
<ul>
<li><strong>Quote from reference in title:</strong> <em>“As a rule of thumb, qualitative color scales work best when there are three to five different categories that need to be colored. Once we reach eight to ten different categories or more, the task of matching colors to categories becomes too burdensome to be useful, even if the colors remain sufficiently different to be distinguishable in principle.”</em></li>
<li><strong>Possible solutions</strong>: Label points (potentially color according to a categorisation variable with fewer levels while labelling according to the variable of interest)</li>
</ul></li>
<li><strong>Irrelevant:</strong> Do not color without a clear purpose that helps answer a question.</li>
</ul></li>
</ul>
<section id="color-vision-deficiency" class="level3">
<h3 class="anchored" data-anchor-id="color-vision-deficiency">Color vision deficiency</h3>
<p><strong>Tip:</strong> To make sure your figures work for people with <em>cvd (color-vision-deficiency)</em>, don’t just rely on specific color scales. Instead, test your figures in a cvd simulator - See <a href="https://colorspace.r-forge.r-project.org/reference/simulate_cvd.html"><code>colorspace::deutan</code></a></p>
</section>
<section id="color-contrasts" class="level3">
<h3 class="anchored" data-anchor-id="color-contrasts">Color contrasts</h3>
<p>We judge color relative to other colors, so colors might appear darker or lighter than they are depending on surrounding colors. See fx. <a href="https://socviz.co/lookatdata.html#perception-and-data-visualization">section 1.3.1</a> from Kieran Healy.</p>
</section>
<section id="color-scales" class="level3">
<h3 class="anchored" data-anchor-id="color-scales">Color “scales”</h3>
<p>See <a href="https://www.stat.auckland.ac.nz/~paul/stats787/Current/Slides/perception-slides.html#/colour">slide 11</a>.</p>
<p>Works for categorical variables:</p>
<ul>
<li><em>hue:</em> Different colors</li>
</ul>
<p>Works for numerical variables:</p>
<blockquote class="blockquote">
<p>Make sure to keep hue constant while changing these.</p>
</blockquote>
<ul>
<li><em>chroma:</em> How “saturated” the color is. White, grey, black have no chroma.</li>
<li><em>luminance:</em> Darkness/brightness of color. On scale we go from white to black.</li>
</ul>
</section>
<section id="its-not-only-about-color" class="level3">
<h3 class="anchored" data-anchor-id="its-not-only-about-color">It’s not only about color</h3>
<p><a href="https://clauswilke.com/dataviz/redundant-coding.html">Redundant coding</a> in essence means we do more than one aesthetic mapping to a single variable. Wilke fx. recommends:</p>
<blockquote class="blockquote">
<p><em>“use color to enhance the visual appearance of the figure without relying entirely on color to convey key information.”</em></p>
</blockquote>
<ul>
<li><strong>Scatter plots:</strong> Fx. change the shape of points instead of only color.</li>
<li><strong>Line plots:</strong>
<ul>
<li>Changing line type often <strong>does not work very well</strong>.</li>
<li><em>“If there is a clear visual ordering in your data, make sure to match it in the legend.”</em>.
<ul>
<li>Most plots will create legend in alphabetical order. Make sure to create factor with levels ordered by magnitude.</li>
</ul></li>
</ul></li>
</ul>
</section>
</section>
<section id="designing-figures-without-legends" class="level2">
<h2 class="anchored" data-anchor-id="designing-figures-without-legends"><a href="https://clauswilke.com/dataviz/redundant-coding.html#designing-figures-without-legends">Designing figures without legends</a></h2>
<blockquote class="blockquote">
<p><em>“Whenever possible, design your figures so they don’t need a legend.”</em></p>
</blockquote>
<p>See packages: - <code>ggforce</code> which has <code>geom</code>s that take <code>label</code> as an aesthetic mapping - <code>directlabels</code></p>
</section>
<section id="multi-panel-figures" class="level2">
<h2 class="anchored" data-anchor-id="multi-panel-figures"><a href="https://clauswilke.com/dataviz/multi-panel-figures.html">Multi-panel figures</a></h2>
<ul>
<li><strong>Small multiples:</strong> <em>“Small multiples are plots consisting of multiple panels arranged in a regular grid. Each panel shows a different subset of the data but all panels use the same type of visualization.”</em>
<ul>
<li>Be <strong>very careful</strong> with having different axis ranges across panels. Guideline to almost never do this. If you HAVE to, make a note about it to the reader.</li>
</ul></li>
<li><strong>Coumpound figures:</strong> <em>“Compound figures consist of separate figure panels assembled in an arbitrary arrangement (which may or may not be grid based) and showing entirely different visualizations, or possibly even different datasets.”</em>
<ul>
<li>Unlike small multiples, where panels are labelled by variables, labels often need to <strong>be added manually</strong> to compound figures. Make sure they uniquely define each figure and are formatted (font, size, placement, etc.) nicely.</li>
</ul></li>
</ul>
</section>
<section id="titles-captions-and-tables" class="level2">
<h2 class="anchored" data-anchor-id="titles-captions-and-tables"><a href="https://clauswilke.com/dataviz/figure-titles-captions.html">Titles, captions and tables</a></h2>
<ul>
<li><strong>Title:</strong> <em>“Either the title is integrated into the actual figure display or it is provided as the first element of the caption underneath the figure.”</em>
<ul>
<li>Use <code>title</code>, <code>subtitle</code> and <code>caption</code> in <code>labs</code>.</li>
</ul></li>
<li><strong>Axis and legend titles:</strong>
<ul>
<li>Axis and legend titles should be informative.
<ul>
<li>Display units in parentheses when possible.</li>
</ul></li>
<li>Legend label not needed when self explanatory. Fx. when values displayed are “female” and “male”, so the variable is obviously sex/gender.</li>
</ul></li>
<li><strong>Tables:</strong>
<ul>
<li>See the 6-item breakdown of table guidelines in <a href="https://clauswilke.com/dataviz/figure-titles-captions.html#tables">this section</a> from the reference in the title of this section.</li>
<li>Place captions on top (underneath for figures).</li>
</ul></li>
</ul>
<p><strong>Tip:</strong> Use <code>expression</code>s to make LaTeX rendered text. Fx. write</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">labs</span>(<span class="at">x =</span> <span class="fu">expression</span>(<span class="fu">paste</span>(<span class="st">"Engine displacment ("</span>, <span class="st">"in"</span><span class="sc">^</span><span class="dv">3</span>, <span class="st">")"</span>)))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>to render the exponent.</p>
</section>
<section id="gestault-rules" class="level2">
<h2 class="anchored" data-anchor-id="gestault-rules"><a href="https://socviz.co/lookatdata.html#gestalt-rules">Gestault rules</a></h2>
<blockquote class="blockquote">
<p><em>“The strong inferences we make about relationships between visual elements from relatively sparse visual information are called “gestalt rules”. They are not pure perceptual effects… Rather, they describe our tendency to infer relationships between the objects we are looking at in a way that goes beyond what is strictly visible…“</em>.</p>
</blockquote>
<p>See <a href="https://www.stat.auckland.ac.nz/~paul/stats787/Current/Slides/perception-slides.html#/gestalt-rules">slide 10</a> for a “ranking” of what rules are dominant over each other and should be used for creating relations between data values.</p>
</section>
<section id="channels" class="level2">
<h2 class="anchored" data-anchor-id="channels">Channels</h2>
<p><em>Channels</em> are a concept from <a href="https://socviz.co/lookatdata.html#channels-for-representing-data">section 1.5</a> from Kieran Healey. See a list of visual channels in the figures to the right in the reference.</p>
<p>Order of “best” channels, where “best” means that randomly asked people can best decode the value of data from a visualisation.</p>
<ul>
<li>Position</li>
<li>Length</li>
<li>Angle</li>
<li>Area</li>
<li>Color</li>
<li>Shape</li>
<li>Texture (fx. hashing areas)
<ul>
<li>Usually just a worse choice than color</li>
</ul></li>
</ul>
</section>
</section>
<section id="references" class="level1">
<h1>References</h1>
<section id="lecture-notes-and-slides-from-stats-787-data-visualisation-at-uoa" class="level2">
<h2 class="anchored" data-anchor-id="lecture-notes-and-slides-from-stats-787-data-visualisation-at-uoa">Lecture notes and slides from <a href="https://courseoutline.auckland.ac.nz/dco/course/STATS/787/1213">STATS 787: Data Visualisation at UoA</a></h2>
<ul>
<li><a href="https://www.stat.auckland.ac.nz/~paul/stats787/Current/Topics/intro.html">Lecture 1 (Introduction to Data Visualisation)</a>
<ul>
<li><a href="https://www.stat.auckland.ac.nz/~paul/stats787/Current/Slides/intro-slides.html#/">Slides</a></li>
</ul></li>
<li><a href="https://www.stat.auckland.ac.nz/~paul/stats787/Current/Topics/effective.html">Lecture 4 (Effective Data Visualisations)</a>
<ul>
<li><a href="https://www.stat.auckland.ac.nz/~paul/stats787/Current/Slides/effective-slides.html#/">Slides</a></li>
</ul></li>
<li><a href="https://www.stat.auckland.ac.nz/~paul/stats787/Current/Topics/perception.html">Lecture 5 (Visual Perception)</a>
<ul>
<li><a href="https://www.stat.auckland.ac.nz/~paul/stats787/Current/Slides/perception-slides.html#/">Slides</a></li>
</ul></li>
</ul>
</section>
<section id="references-from-inside-lecture-notes" class="level2">
<h2 class="anchored" data-anchor-id="references-from-inside-lecture-notes">References from inside lecture notes</h2>
<ul>
<li><strong>Top tier book!!</strong> <a href="https://clauswilke.com/dataviz/">Fundamentals of Data Visualization</a> by Claus O. Wilke</li>
</ul>


</section>
</section>

<a onclick="window.scrollTo(0, 0); return false;" role="button" id="quarto-back-to-top"><i class="bi bi-arrow-up"></i> Back to top</a></main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp("https:\/\/mathiaslj\.github\.io\/R_notes\/");
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




<footer class="footer"><div class="nav-footer"><div class="nav-footer-center"><div class="toc-actions d-sm-block d-md-none"><ul><li><a href="https://github.com/mathiaslj/R_notes/blob/main/plotting/edv.qmd" class="toc-action"><i class="bi bi-github"></i>View source</a></li></ul></div></div></div></footer></body></html>